<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:FileTransferino.App.ViewModels"
        x:Class="FileTransferino.App.Views.CommandPaletteWindow"
        x:DataType="vm:CommandPaletteViewModel"
        Title="Command Palette"
        Width="600"
        Height="400"
        WindowStartupLocation="CenterOwner"
        CanResize="False"
        Topmost="True"
        Background="#2E3440"
        BorderBrush="#4C566A"
        BorderThickness="1">

    <Window.Styles>
        <Style Selector="TextBox">
            <Setter Property="Background" Value="#434C5E" />
            <Setter Property="Foreground" Value="#ECEFF4" />
            <Setter Property="BorderBrush" Value="#5E81AC" />
            <Setter Property="CaretBrush" Value="#FFFFFF" />
            <Setter Property="SelectionBrush" Value="#5E81AC" />
        </Style>
        
        <!-- Ensure TextBox background stays consistent -->
        <Style Selector="TextBox /template/ Border#PART_BorderElement">
            <Setter Property="Background" Value="#434C5E" />
        </Style>
        
        <!-- Focused TextBox gets a subtle glow -->
        <Style Selector="TextBox:focus /template/ Border#PART_BorderElement">
            <Setter Property="Background" Value="#434C5E" />
            <Setter Property="BorderBrush" Value="#81A1C1" />
            <Setter Property="BorderThickness" Value="0,0,0,2" />
        </Style>
        
        <!-- Pointer over state -->
        <Style Selector="TextBox:pointerover /template/ Border#PART_BorderElement">
            <Setter Property="Background" Value="#434C5E" />
        </Style>
        
        <!-- Watermark text -->
        <Style Selector="TextBox /template/ TextBlock#PART_Watermark">
            <Setter Property="Foreground" Value="#A0A8B8" />
        </Style>
        
        <Style Selector="ListBox">
            <Setter Property="Background" Value="#2E3440" />
            <Setter Property="BorderBrush" Value="Transparent" />
        </Style>
        
        <Style Selector="ListBoxItem">
            <Setter Property="Padding" Value="16,10" />
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderThickness" Value="3,0,0,0" />
            <Setter Property="BorderBrush" Value="Transparent" />
        </Style>
        
        <!-- Selected item: subtle highlight with left border -->
        <Style Selector="ListBoxItem:selected">
            <Setter Property="Background" Value="#3B4252" />
            <Setter Property="BorderBrush" Value="#81A1C1" />
        </Style>
        
        <!-- Hover: subtle background -->
        <Style Selector="ListBoxItem:pointerover">
            <Setter Property="Background" Value="#353B45" />
        </Style>
        
        <Style Selector="TextBlock.commandName">
            <Setter Property="Foreground" Value="#E8E8E8" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="FontWeight" Value="Medium" />
        </Style>
        
        <Style Selector="TextBlock.commandCategory">
            <Setter Property="Foreground" Value="#9E9E9E" />
            <Setter Property="FontSize" Value="12" />
        </Style>
    </Window.Styles>

    <DockPanel>
        <!-- Search Box -->
        <TextBox DockPanel.Dock="Top"
                 Text="{Binding SearchText}"
                 Watermark="Type to search commands..."
                 Padding="12"
                 FontSize="16"
                 BorderThickness="0,0,0,1"
                 x:Name="SearchBox" />

        <!-- Command List -->
        <ListBox x:Name="CommandList"
                 ItemsSource="{Binding FilteredCommands}"
                 SelectedItem="{Binding SelectedCommand}"
                 BorderThickness="0"
                 Margin="0">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Spacing="4">
                        <TextBlock Text="{Binding Name}" 
                                   Classes="commandName" />
                        <TextBlock Text="{Binding Category}" 
                                   Classes="commandCategory" />
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </DockPanel>
</Window>
